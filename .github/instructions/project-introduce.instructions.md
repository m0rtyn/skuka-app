---
description: Project introduction for skuka-app
applyTo: "**"
---

## 1. Project Description

You are developing an open-source, modern-design timer app: Skuka App. It is a
cross-platform timer app.

Emoji logo: ðŸ˜‘

- **Project Name:** Skuka
- **Description:** The app designed for "impulsive minds," aiming to make a
  boring more accessible and engaging.
- **Core Purpose:** To provide users with a tool to practice boring (rest),
  track their progress, and stay motivated through various features like
  statistics, streaks, and a leaderboard.

## 2. Technology Stack & Approaches

Read [package.json](../../package.json) to know all npm packages you can use.

The project uses the following technologies:

- npm as package manager
- react 19, using hooks, functional components
- TypeScript programming language
- styled-components for css-in-js framework
- Redux Toolkit for global state management
- date-fns for date and time library
- Vitest for testing, testing-library for react component test
- Prettier for code formatting
- ESLint for code linting
- VSCode Copilot for code editing and AI coding assistance

Note: All tools and libraries used are the latest versions. The application only
needs to be compatible with the latest browsers;

- **Frontend:**
  - **Framework/Library:** React (v19)
  - **State Management:** Redux with `@reduxjs/toolkit`
  - **Routing:** React Router (v6)
  - **Language:** TypeScript
  - **Styling:** Styled Components (CSS-in-JS) and CSS Modules
  - **Build Tool:** Vite
- **Backend:**
  - **Platform:** Firebase
  - **Services:** Firestore (Database), Firebase Authentication, Firebase Cloud
    Functions
- **Progressive Web App (PWA):**
  - Utilizes an autogenerated Service Worker and a Web App Manifest
    (`public/manifest.json`) for PWA capabilities (offline support,
    installability).
- **Testing:**
  - Vitest
- **Code Quality & Formatting:**
  - ESLint (configuration likely in `package.json` or a dotfile)
  - Prettier (formatting, integrated with `lint-staged`)
  - Husky (for pre-commit hooks, e.g., running `lint-staged`)
- **Versioning & Changelog:**
  - Standard Version (`standard-version` package) for automated version bumping
    and changelog generation (`CHANGELOG.md`).

## 3. Project Structure

- **`/` (Root):**
  - Configuration files: `package.json`, `vite.config.ts`, `tsconfig.json`,
    `firebase.json`, `firestore.indexes.json`.
  - Markdown files: `README.md`, `CHANGELOG.md`.
- **`public/`:**
  - Static assets served directly by the web server.
  - Icons, manifest file (`manifest.json`), `robots.txt`, and other public
    resources.
- **`src/`:** Main application source code (TypeScript/TSX).
  - `index.tsx`: Entry point for the React application.
  - `api/`: Modules for interacting with the backend (Firebase).
    - Contains functions for fetching data (`fetch-days.ts`,
      `fetch-settings.ts`, `fetch-stats.ts`), writing data
      (`write-session-to-server.ts`), and user statistics (`get-user-stats.ts`).
    - `firebase-migrations/`: Likely contains scripts or configurations for
      Firestore data migrations.
  - `app/`: Core application setup and global concerns.
    - `app.tsx`: Root React component.
    - `app-router.tsx`: Defines application routes using React Router.
    - `store.ts`: Redux store configuration.
    - `theme.ts`: Theme definition for Styled Components.
    - `global-styles.ts`, `global.css`: Global CSS rules.
  - `features/`: Contains distinct feature modules of the application.
    - `about-page/`
    - `dev-page/` (Likely for development utilities/tests)
    - `home/` (Main landing/timer page)
    - `leaderboard/`
    - `settings/`
    - `sign-in-page/`
    - `timer/` (Core meditation timer logic and UI)
    - `user-stats/` (User statistics display)
  - `shared/`: Reusable components, utilities, constants, assets, and type
    definitions (`audio.d.ts`).
- **`functions/`:** Source code for Firebase Cloud Functions.
  - `src/index.ts`: Entry point for cloud functions.
  - `package.json`, `tsconfig.json`: Specific configurations for the functions
    environment.
- **`build/`:** Output directory for the production build generated by Vite.
  Contains optimized static assets.

## 4. Key Configurations

- **`package.json`:**
  - Defines project metadata, dependencies (`dependencies`, `devDependencies`),
    and scripts (`scripts`) for development, building, testing, linting,
    formatting, and versioning.
  - Includes `type: "module"` indicating ES Module usage.
  - Specifies Node.js and npm engine versions.
  - Manages `lint-staged` and `husky` configurations for pre-commit checks.
- **`vite.config.mjs`:**
  - Configures Vite, the build tool and development server.
  - Includes plugins like `@vitejs/plugin-react` (for React support),
    `vite-plugin-svgr` (to import SVGs as React components),
    `vite-tsconfig-paths` (for path aliasing from `tsconfig.json`), and
    potentially `rollup-plugin-visualizer` (for bundle analysis).
- **`tsconfig.json` (Root and `functions/`):**
  - TypeScript compiler options, including target ECMAScript version, module
    system, JSX settings, strictness, path aliases, and included/excluded files.
- **`firebase.json`:**
  - Configures Firebase project aspects:
    - **Hosting:** Specifies the public directory (`build`), rewrites (e.g., for
      SPA routing), headers.
    - **Firestore:** Points to `firestore.rules` and `firestore.indexes.json`.
    - **Functions:** Specifies the source directory (`functions`) and runtime.
- **`firestore.rules`:**
  - Defines security rules for the Firestore database, controlling read/write
    access to collections and documents.
- **`firestore.indexes.json`:**
  - Specifies composite indexes for Firestore to optimize query performance.
- **`jest.config.js`:**
  - Configuration for the Jest testing framework.
- **`babel-plugin-macro.config.js`:**
  - Configuration for Babel macros, which might be used by libraries like
    `styled-components` for compile-time transformations.

## 5. Core Application Features & Modules

- **Authentication (`src/features/sign-in-page/`):**
  - Handles user sign-up and sign-in, likely integrated with Firebase
    Authentication.
- **Meditation Timer (`src/features/timer/`, `src/features/home/`):**
  - The central feature of the app.
  - Provides UI for starting, pausing, and stopping meditation sessions.
  - May use `nosleep.js` to keep the device screen active during sessions.
  - May use `use-sound` for audio cues (start/end bells).
- **Session Management & Data Sync (`src/api/write-session-to-server.ts`,
  `src/api/fetch-days.ts`):**
  - Saves completed meditation session data (duration, date, etc.) to Firestore.
  - Fetches historical session data for display.
- **User Statistics (`src/features/user-stats/`, `src/api/fetch-stats.ts`,
  `src/api/get-user-stats.ts`):**
  - Displays user progress, including total meditation time, streaks, session
    history.
  - Visualizations are likely implemented using:
    - `react-activity-calendar`: For a GitHub-style activity heatmap.
    - `lightweight-charts`: For other graphical representations of stats.
- **Settings (`src/features/settings/`, `src/api/fetch-settings.ts`):**
  - Allows users to customize application preferences (e.g., timer duration,
    sounds, theme).
  - Settings are fetched from and saved to Firestore.
- **Leaderboard (`src/features/leaderboard/`):**
  - A feature to display user rankings or comparative statistics, fostering a
    sense of community or friendly competition.
- **About Page (`src/features/about-page/`):**
  - Provides information about the Skuka app, its purpose, or how to use it.
- **Developer Page (`src/features/dev-page/`):**
  - A dedicated section likely used for development utilities, debugging tools,
    or experimental features.
- **PWA Functionality (`src/app/service-worker.ts`, `public/manifest.json`):**
  - Enables the app to be installed on users' devices (Add to Home Screen).
  - Provides offline access to certain features or cached data.
- **Firebase Cloud Functions (`functions/`):**
  - Handle server-side logic that cannot or should not be done on the client.
  - Potential uses:
    - Aggregating complex user statistics or leaderboard data.
    - Performing data migrations or transformations (related to
      `src/api/firebase-migrations/`).
    - Enforcing complex business rules or security constraints.
    - Sending notifications.

## 6. Build and Deployment

- **Build Process:**
  - The frontend application is built using Vite via the `yarn build` script
    (which runs `vite build`).
  - Firebase Cloud Functions are built separately using `yarn build-functions`
    (which navigates to the `functions` directory, installs dependencies, and
    runs `npm run build`).
  - The `copy-changelog` script copies `CHANGELOG.md` to `build/CHANGELOG.txt`
    during the build.
- **Deployment:**
  - The application is likely deployed using Firebase Hosting, as configured in
    `firebase.json`.
  - Cloud Functions are deployed to the Firebase Cloud Functions environment.
- **Bundle Analysis:**
  - The `analyze` script (`source-map-explorer 'build/static/js/*.js'`) allows
    for inspection of the JavaScript bundle sizes.

## 7. Noteworthy Dependencies & Their Roles

- **`@reduxjs/toolkit`:** The recommended way to write Redux logic, simplifying
  store setup, reducers, and asynchronous actions.
- **`axios`:** A promise-based HTTP client for making API requests (though
  Firebase SDK might handle most backend communication).
- **`classnames`:** A utility for conditionally joining CSS class names.
- **`date-fns`:** A modern JavaScript date utility library for parsing,
  formatting, and manipulating dates.
- **`firebase` & `react-firebase-hooks`:** Core Firebase SDK and React hooks for
  easy integration with Firebase services.
- **`lightweight-charts`:** Financial charts for displaying time-series data,
  likely used in user statistics.
- **`nosleep.js`:** Prevents screen lock on mobile devices during active
  sessions.
- **`rc-progress`:** UI component for displaying progress bars.
- **`react-activity-calendar`:** Component for rendering a GitHub-like activity
  calendar.
- **`react-swipeable`, `react-swipeable-views`:** Libraries for implementing
  touch swipe gestures and views.
- **`react-tooltip`:** Component for creating tooltips.
- **`rollup-plugin-visualizer`:** Generates a visual representation of Rollup
  bundle contents.
- **`styled-components`:** A popular CSS-in-JS library for component-level
  styling.
- **`use-long-press`:** React hook for detecting long press events.
- **`use-sound`:** React hook for playing sound effects.
- **`uuid`:** For generating universally unique identifiers.
- **`vite-plugin-svgr`:** Vite plugin to load SVG files as React components.
- **`vite-tsconfig-paths`:** Vite plugin to use TypeScript path aliases.
- **`web-vitals`:** Library for measuring web performance metrics.
