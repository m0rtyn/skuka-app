---
description: Project introduction for skuka-app
applyTo: "**"
---

## 1. Project Description

You are developing an open-source, modern-design timer app: Skuka App. It is a
cross-platform timer app.

Emoji logo: ðŸ˜‘

- **Project Name:** Skuka
- **Description:** The app designed for "impulsive minds," aiming to make
  boredom more accessible and engaging.
- **Core Purpose:** To provide users with a tool to practice doing nothing
  (rest), track their progress, and stay motivated through various features like
  statistics, streaks, and a leaderboard.

## 2. Technology Stack & Approaches

Read [package.json](../../package.json) to know all npm packages you can use.

The project uses the following technologies:

- npm as package manager
- React 19+, using hooks, functional components
- TypeScript programming language
- styled-components for css-in-js framework
- Redux Toolkit for global state management
- date-fns for date and time library
- Vitest for testing, testing-library for react component test
- Prettier for code formatting
- ESLint for code linting
- VSCode Copilot for code editing and AI coding assistance

Note: All tools and libraries used are the latest versions. The application only
needs to be compatible with the latest browsers.

- **Frontend:**
  - **Framework/Library:** React
  - **State Management:** Redux with `@reduxjs/toolkit`
  - **Routing:** React Router
  - **Language:** TypeScript
  - **Styling:** Styled Components (CSS-in-JS) and
  - **Build Tool:** Vite
- **Backend:**
  - **Platform:** Firebase
  - **Services:** Firestore (Database), Firebase Authentication
- **Progressive Web App (PWA):**
  - Utilizes a Service Worker and a Web App Manifest (`public/manifest.json`)
    for PWA capabilities (offline support, installability).
- **Testing:**
  - Vitest
- **Code Quality & Formatting:**
  - ESLint
  - Prettier
- **Versioning & Changelog:**
  - Standard Version (`standard-version` package) for automated version bumping
    and changelog generation (`CHANGELOG.md`).

## 3. Project Structure

- **`/` (Root):**
  - Configuration files: `package.json`, `vite.config.ts`, `tsconfig.json`,
    `firebase.json`, `firestore.indexes.json`.
  - Markdown files: `README.md`, `CHANGELOG.md`.
- **`public/`:**
  - Static assets served directly by the web server.
  - Icons, manifest file (`manifest.json`), `robots.txt`, and other public
    resources.
- **`src/`:** Main application source code (TypeScript/TSX).
  - `app/main.tsx`: Entry point for the React application.
  - `shared/api/`: Modules for interacting with the backend (Firebase).
    - Contains functions for writing data (`write-session-to-server.ts`).
    - `firebase-migrations/`: Contains scripts for Firestore data migrations.
  - `app/`: Core application setup and global concerns.
    - `app.tsx`: Root React component.
    - `store.ts`: Redux store configuration.
    - `global-styles.ts`, `index.css`: Global CSS rules.
    - `theme.ts`: Theme definition for Styled Components.
  - `features/`: Contains distinct feature modules of the application.
    - `about-page/`
    - `dev-page/` (Likely for development utilities/tests)
    - `home/` (Main landing/timer page)
    - `leaderboard/`
    - `settings/`
    - `sign-in-page/`
    - `timer/` (Core meditation timer logic and UI)
    - `user-stats/` (User statistics display)
  - `shared/`: Reusable components, utilities, constants, and type definitions.
- **`functions/`:** Source code for Firebase Cloud Functions.
  - `src/index.ts`: Entry point for cloud functions.
  - `package.json`, `tsconfig.json`: Specific configurations for the functions
    environment.
- **`dist/`:** Output directory for the production build generated by Vite.
  Contains optimized static assets.

## 4. Key Configurations

- **`package.json`:**
  - Defines project metadata, dependencies (`dependencies`, `devDependencies`),
    and scripts (`scripts`) for development, building, testing, and versioning.
  - Includes `type: "module"` indicating ES Module usage.
- **`vite.config.ts`:**
  - Configures Vite, the build tool and development server.
  - Includes plugins like `@vitejs/plugin-react` (for React support).
- **`tsconfig.json` (Root and `functions/`):**
  - TypeScript compiler options, including target ECMAScript version, module
    system, JSX settings, strictness, and path aliases.
- **`firebase.json`:**
  - Configures Firebase project aspects:
    - **Hosting:** Specifies the public directory (`dist`), rewrites (e.g., for
      SPA routing), headers.
    - **Firestore:** Points to `firestore.rules` and `firestore.indexes.json`.
    - **Functions:** Specifies the source directory (`functions`) and runtime.
- **`firestore.rules`:**
  - Defines security rules for the Firestore database, controlling read/write
    access to collections and documents.
- **`firestore.indexes.json`:**
  - Specifies composite indexes for Firestore to optimize query performance.

## 5. Core Application Features & Modules

- **Authentication:**
  - Handles user sign-in with Firebase Authentication.
- **Timer (`src/features/home/`):**
  - The central feature of the app.
  - Provides UI for starting and stopping meditation sessions.
  - May use `nosleep.js` to keep the device screen active during sessions.
  - May use `use-sound` for audio cues (start/end bells).- **Session Management
    & Data Sync (`src/features/home/api/write-session-to-server.ts`):**
  - Saves completed session data (duration, date, etc.) to Firestore.
  - Fetches historical session data for display.
- **User Statistics (`src/features/user-stats/`):**
  - Displays user progress, including total time, streaks, and session history.
- **Leaderboard (`src/features/leaderboard/`):**
  - A feature to display user rankings, fostering a sense of community or
    friendly competition.
- **PWA Functionality (`public/manifest.json`):**
  - Enables the app to be installed on users' devices (Add to Home Screen).
  - Provides offline access to certain features or cached data via Firestore's
    local cache.
- **Firebase Cloud Functions (`functions/`):**
  - Handle server-side logic that cannot or should not be done on the client.
  - Potential uses:
    - Aggregating complex user statistics or leaderboard data.
    - Performing data migrations or transformations (related to
      `src/shared/api/firebase-migrations/`).

## 6. Build and Deployment

- **Build Process:**
  - The frontend application is built using Vite via the `npm run build` script.
  - Firebase Cloud Functions are built separately using
    `npm run build-functions`.
  - The `copy-changelog` script copies `CHANGELOG.md` to `dist/CHANGELOG.txt`
    during the build.
- **Deployment:**
  - The application is deployed using Netlify Hosting
  - Cloud Functions are deployed to the Firebase Cloud Functions environment.
- **Bundle Analysis:**
  - The `analyze` script (`source-map-explorer 'dist/static/js/*.js'`) allows
    for inspection of the JavaScript bundle sizes.

## 7. Noteworthy Dependencies & Their Roles

- **`@reduxjs/toolkit`:** The recommended way to write Redux logic, simplifying
  store setup, reducers, and asynchronous actions.
- **`date-fns`:** A modern JavaScript date utility library for parsing,
  formatting, and manipulating dates.
- **`firebase`:** Core Firebase SDK for easy integration with Firebase services.
- **`styled-components`:** A popular CSS-in-JS library for component-level
  styling.
